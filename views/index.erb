<!DOCTYPE html> 
<html lang="en"> 
  <head> 
    <meta charset="utf-8"> 
    <title>Shopbone</title> 
    <meta name="description" content=""> 
    <meta name="author" content=""> 

    <!-- Le styles --> 
    <link rel="stylesheet" href="/css/bootstrap.css" type="text/css" media="screen" /> 
    <link rel="stylesheet" href="/css/datepicker.css" type="text/css" media="screen"/>


		<script src="js/vendor/jquery-1.7.2.min.js"></script> 
		<script src="js/vendor/underscore.min.js"></script> 
		<script src="js/vendor/bootstrap.min.js"></script> 
		<script src="js/vendor/bootstrap-datepicker.js"></script> 
		<script src="js/vendor/backbone.min.js"></script> 

    
    <!-- models: -->
    <script src="js/Category.js"></script> 
    <script src="js/ShopItem.js"></script> 

    <!-- views: -->
    <script src="js/CategoryView.js"></script> 
    <script src="js/ShoppingView.js"></script> 
    <script src="js/ShopItemView.js"></script> 

    <script type="text/template" id="categoryView">
     <div class="modal-header">
        <button class="close" data-dismiss="modal">Ã—</button>
        <h3>Manage Categories</h3>
      </div>
      <div class="modal-body">
        <form class="form-horizontal">
          <div class="control-group">
            <label>new category:</label>
            <input type="text" class="category_name" ></input>
            <button class="category_add btn btn-primary" >Add</button>
          </div>
          <ul class="categories span3">
            
          </ul>
        </form>
      </div>
      <div class="modal-footer">
        <a href="#" class="btn">Close</a>
      </div>
    </script>
    
    <script type="text/template" id="shoppingView">
    <div class="well">
      <textarea class="listbox"></textarea>
      <button class="addtolist btn btn-primary">Add to list</button> 
    </div>
    <ul class="shoppinglist">
    </ul>
    </script>
    
    <script type="text/template" id="shopitemView">
      <%%= model.get('name') %>

      <div class="btn-group">
        <a class="btn-mini dropdown-toggle btn-success" data-toggle="dropdown" href="#">
          <%%= (model.get('category')) ? model.get('category').get('name') : 'no category' %>  
        </a>
        <ul class="dropdown-menu">
          <%% categories.each(function(c) { %>
              <li><a href="#"><%%= c.get('name') %></a></li>
          <%% },this) %>
        </ul>
      </div>

    </script>


  </head> 
 
  <body>
	<div class="navbar navbar-fixed-top"> 
      <div class="navbar-inner">
		 	<a class="brand" href="#">Shopbone</a>
	    <div class="container"> 

	      <ul class="nav"> 
	        <li class="active"><a href="#">About</a></li> 
        </ul>
      </div>  
	  </div> 
	</div>
	<div class="container-fluid">
			<section class="row" style="margin-top: 40px;">
        <div id="app"> 
				</div>
			</section>
	  	<footer> 
      </footer> 
	 
    </div> <!-- /container -->


    <div class="modal fade hide" id="categorymodal"></div>


    <script>
      $(function() {
        window.categories = new CategoryCollection();
        category = new CategoryView({collection: window.categories });
        $("#categorymodal").html(category.render().el);

        
        shoppingView = new ShoppingView({categories: window.categories });
        $("#app").html(shoppingView.render().el);
      });
    </script>

		</body> 
</html>
